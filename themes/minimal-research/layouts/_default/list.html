{{ define "main" }}
  <div class="prose dark:prose-invert max-w-none">
    {{ if eq .Section "publications" }}
      {{/* Publications sorted by year */}}
      {{ $pages := .Pages.ByParam "year" }}
      {{ $pages = $pages.Reverse }}
      {{ range $pages }}
        {{ if ne .Params.year ($.Scratch.Get "current_year") }}
          {{ $.Scratch.Set "current_year" .Params.year }}
          <h2 class="publication-year">{{ .Params.year }}</h2>
        {{ end }}
          <article class="publication-entry">
            <h3 class="publication-title">{{ .Title }}</h3>
            <p class="publication-authors">{{ .Params.authors }}</p>
            <p class="publication-journal">{{ .Params.journal }}</p>
            <div class="publication-meta">
              <span>{{ .Params.year }}</span>
              {{ with .Params.doi }}
                <a href="{{ . }}" class="publication-doi">DOI</a>
              {{ end }}
            </div>
          </article>
      {{ end }}
    {{ else }}
      <!-- Default list layout for other sections -->
      <ul class="list-disc pl-6">
        {{ range .Pages }}
          <li class="py-2">
            <a href="{{ .RelPermalink }}" class="text-blue-600 hover:text-blue-800">{{ .Title }}</a>
          </li>
        {{ end }}
      </ul>
    {{ end }}
  </div>
{{ end }}
